trigger:
  - master

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: PowerShell@2
    condition: contains(variables['Build.Repository.Name'], 'repo')
    inputs:
      filePath: build-nuget.ps1
      arguments: >
        -packageName "Allergen"
        -repoName $(Build.Repository.Name)
  
  - task: NuGetAuthenticate@0
    displayName: 'NuGet Authenticate'

  - task: NuGetCommand@2
    displayName: 'NuGet push'
    inputs:
      command: push
      publishVstsFeed: 'Monorepo/ProtoPackages'
      allowPackageConflicts: true



